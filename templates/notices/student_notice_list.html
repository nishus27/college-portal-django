{% extends 'notices/base.html' %}

{% block content %}
<h2 class="text-2xl font-bold mb-6">ðŸ“¢ Latest Notices</h2>

<div class="grid md:grid-cols-2 gap-6">
    {% for notice in notices %}
    <div class="bg-white p-5 rounded-xl shadow hover:shadow-lg transition">

        <div class="flex justify-between items-center">
            <h3 class="text-lg font-bold">{{ notice.title }}</h3>
            <span class="text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded">
                {{ notice.category }}
            </span>
        </div>

        <!-- âœ… AI SUMMARY (Bullet Points) -->
        {% if notice.ai_summary %}
        <div class="mt-3 text-sm text-gray-700">
            <strong>ðŸ¤– AI Summary:</strong>
            <ul class="list-disc list-inside mt-1 space-y-1">
                {% for line in notice.ai_summary.splitlines %}
                    {% if line %}
                        <li>{{ line }}</li>
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <!-- Full Notice Text -->
        <details class="mt-3">
            <summary class="cursor-pointer text-blue-600">
                Read Full Notice
            </summary>
            <p class="mt-2 text-gray-700">
                {{ notice.description }}
            </p>
        </details>

        <!-- PDF Attachment -->
        {% if notice.attachment %}
        <a href="{{ notice.attachment.url }}"
           target="_blank"
           class="inline-block mt-3 text-sm text-white bg-green-600 px-3 py-1 rounded">
            ðŸ“„ View / Download Notice PDF
        </a>
        {% endif %}

    </div>
    {% empty %}
    <p>No notices available.</p>
    {% endfor %}
</div>
{% endblock %}
 